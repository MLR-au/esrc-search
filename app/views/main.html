<div ng-style="topbarStyle">
    <div class="row" style="background-color: #003268;" ng-if="!removeHeader">
        <div class="col-sm-10 col-md-11 col-lg-offset-2 col-lg-7">
            <a ng-if="returnToSiteLink" href="{{site_url}}" style="color:white; font-weight: 300;">Return to site</a>
        </div>
        <div class="col-sm-2 col-md-1 col-lg-1">
            <!--<a href="http://www.esrc.unimelb.edu.au/search-help/" style="color:white; font-weight: 300;">Help</a>-->
            <a href="http://www.esrc.unimelb.edu.au/search-about/" style="color:white; font-weight: 300;">About</a>
        </div>
    </div>
    <div class="row" style="background-color: #efefea;" ng-if="!removeHeader">
            <div class="col-sm-12 col-md-12 col-lg-12 text-center">
                <h3 style="color: #3d4343; text-shadow: 1px -1px 2px #595959; font-weight: 300; text-rendering: optimizelegibility; margin: 5px 0px;">Search the datasets</h3>
            </div>
            <div class="col-sm-12 col-md-12 col-lg-12 text-center">
                <h4 style="color: #24658A; font-weight: 300; text-rendering: optimizelegibility; margin: 5px 0px;">
                    <a href="http://www.esrc.unimelb.edu.au" style="color: #24658A;">eScholarship Research Centre</a>, 
                    <a href="http://www.lib.unimelb.edu.au" target="_blank" style="color: #24658A;" >The University of Melbourne Library</a>
                </h4>
            </div>
    </div>

    <!-- header controls -->
    <div class="row" style="background-color: #3d4343; padding: 5px 5px;">
        <div class="col-sm-12 col-md-12 col-lg-offset-2 col-lg-8">
                <search-form 
                    help='Normally this would be site / context specific help in this bit...'
                    search-type="keyword"
                    >
                </search-form>
        </div>
    </div>
</div>

<!-- side bar: fixed to right -->
<div ng-style="bodypanelStyle">
    <div class="row">
        <div class="col-sm-12 col-md-12 col-lg-offset-2 col-lg-8">
            <tabset>
                <tab heading="Search the data" select="search()" active="tabs[0]">
                    <div class="row">
                        <div class="col-sm-4 col-md-4 col-lg-4">
                            <div class="col-sm-12 text-center">
                                <h4 class="section-heading">
                                    Refine Search
                                </h4>
                                <hr style="margin: 5px 0px 10px 0px;" />
                            </div>
                            <div class="col-sm-12">
                                <button class="btn btn-sm btn-default btn-block" ng-click="clearAllFilters()">clear all</button>
                            </div>
                            <div class="col-sm-12 text-center">
                                <small><a href="" class="" ng-click="openAllFilters()">open all</a></small>
                                &nbsp;&dash;&nbsp;
                                <small><a href="" class="" ng-click="closeAllFilters()">close all</a></small>
                            </div>


                            <!-- FACET WIDGETS-->
                            <div class="col-sm-12"><hr style="margin: 5px 0px;" /></div>
                            <span ng-repeat='widget in facetWidgets'>
                                <div class="col-sm-12">
                                    <facet-widget facet-field="{{widget.facetField}}" label="{{widget.label}}" join="{{widget.join}}" />
                                </div>
                            </span>

                            <!-- DATE FACET WIDGETS -->
                            <div class="col-sm-12"><hr style="margin: 5px 0px;" /></div>
                            <span ng-repeat="widget in dateFacetWidgets">
                                <div class="col-sm-12">
                                    <date-facet-widget facet-field="{{widget.facetField}}"
                                                       existence-from-field="{{widget.existenceFromField}}"
                                                       existence-to-field="{{widget.existenceToField}}"
                                                       id="{{widget.id}}"
                                                       label="{{widget.label}}"
                                                       start="{{widget.start}}"
                                                       end="{{widget.end}}"
                                                       interval="{{widget.interval}}">
                                    </date-facet-widget>  
                                </div>
                            </span>

                        </div>
                        <div class="col-sm-8 col-md-8 col-lg-8">
                            <search-results display-provenance="true"></search-results>
                        </div>
                    </div>
                </tab>
                <tab heading="Controls" select="" active="tabs[1]">
                    <span ng-if="ready">
                        <search-controls></search-controls>
                        <hr/>
                        <button class="btn btn-sm btn-default" ng-click="search()">Update Search</button>
                    </span>
                </tab>
            </tabset>
        </div>
    </div>
</div>
